# 使用DCM控制和导航
在上一节中我们介绍了几个**方向余弦**用于控制和导航的应用示例。在这一节中，我们提供了更多的细节：

- 1、 想要控制飞行器的俯仰角，就需要知道飞行器当前的俯仰姿态，俯仰姿态可以通过飞行器的横滚轴与铅垂向量（ground vertical）的点积求出。

飞行器横滚轴 (X) 与铅垂向量（ground vertical）(Z) 的点积，就是一个方向余弦，r\\(\_{zx}\\)。它就等于横滚轴与地面参考坐标系水平面的夹角的正弦值。所以，矩阵元素直接指示出横滚轴是否与地面平行，且可以直接用于俯仰控制的反馈回路。当飞行器水平时，r\\(\_{zx}\\) = 0 。

- 2、想要控制飞行器的横滚角，就需要知道飞行器当前的滚转姿态，滚转姿态可以通过飞行器的俯仰轴与铅垂向量（ground vertical）的点积求出。

飞行器俯仰轴 (Y) 与铅垂向量（ground vertical）(Z) 的点积，是一个方向余弦，r\\(\_{zy}\\) 。它等于俯仰轴与地面参考坐标系水平面的夹角的正弦值。所以，矩阵元素直接指示出俯仰轴是否与地面平行，且可以直接用于横滚控制（*原文为俯仰，疑似笔误。*）的反馈回路。当飞行器水平时，r\\(\_{zy}\\) = 0。

- 3、想要导航，就需要知道飞行器当前相对于目标点方向的偏航姿态，可以通过飞行器横滚轴与目标点方向的叉乘得到。即使飞行器上下颠倒，依然成立。想要知道飞行器是否飞向相反方向，只需对横滚轴和期望方向向量求点积。如果是负的，则飞行器偏离航向超过 90°。

飞行器的横滚轴向量是旋转矩阵（R）的第一列。我们只需要水平分量，所以，将 Z 轴分量设为 0 。所得向量为：\\(\begin{bmatrix}r_{xx} & r_{yx} & 0 \end{bmatrix}\\) 。将该向量与期望方向向量求叉乘，得到偏航角度的正弦值；求点积得到余弦值。

- 4、想要知道飞行器是否上下颠倒，只需检查飞行器偏航轴与竖直向量点积的符号。如果是负的，则飞行器上下颠倒。

飞行器偏航轴与竖直向量的点积是矩阵元素 r\\(\_{zz}\\) 。当飞行器接近水平飞行时，该元素约等于 0 。当飞行器上下颠倒时，该元素约等于 -1 。当飞行器（原文为固定翼）侧向倾斜 90° 时，该元素为 0 。

- 5、想要知道飞行器绕竖直轴的转向速度，将陀螺仪旋转向量转换到地面参考坐标系，对该向量和竖直轴做点积。

这就等于对旋转矩阵（R）的第三行与陀螺仪旋转向量的点积。所以，飞行器绕地垂轴的转向速度为：\\(\omega\\(\_x\\) r\\(\_{zx}\\) + \omega\\(\_y\\) r\\(\_{zy}\\) + \omega\\(\_z\\) r_{zz}\\) 。

$$
        \begin{bmatrix}
        1 & x & x^2 \\
        1 & y & y^2 \\
        1 & z & z^2 \\
        \end{bmatrix}
$$

$x_i^2$

$$\begin{bmatrix}r_{xx} & r_{yx} & 0 \end{bmatrix}$$

$
        \begin{bmatrix}
        2 & x & x^2 \\
        1 & y & y^2 \\
        1 & z & z^2 \\
        \end{bmatrix}
$

\[
        \begin{bmatrix}
        3 & x & x^2 \\
        1 & y & y^2 \\
        1 & z & z^2 \\
        \end{bmatrix}
\]


        \begin{bmatrix}
        4 & x & x^2 \\
        1 & y & y^2 \\
        1 & z & z^2 \\
        \end{bmatrix}
